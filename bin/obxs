#!/usr/bin/env python3
# This file is placed in the Public Domain.
# pylint: disable=C


"service"


import os
import sys


sys.path.insert(0, os.getcwd())


from obx.main    import forever, privileges, scanner, wrap
from obx.persist import NAME, Workdir, pidfile, pidname


sys.path.insert(0, Workdir.wdr)


try:
    from mods import face
except ModuleNotFoundError:
    face = None


scan = scanner


def wrapped():
    wrap(main)


def main():
    privileges()
    pidfile(pidname(NAME))
    scan(face, init=True)
    forever()


if __name__ == "__main__":
    wrapped()
